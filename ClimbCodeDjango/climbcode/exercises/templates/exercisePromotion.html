{% extends 'base/base.html' %}

{% block title %}InteracTeach{% endblock %}

{% load staticfiles %}
{% block extrastatic %}
    <link rel="stylesheet" href="{% static '../static/css/purchaseExercise.css' %}">{% load staticfiles %}
    <script src="https://www.paypalobjects.com/api/checkout.js"></script>
{% endblock %}

<!-- CONTENIDO -->
{% block content %}
<div class="container">
    <div class="row color-invoice">
        <div class="col-md-12">
            <!-- Presentación -->
            <div class="row">
                <div class="col-lg-7 col-md-7 col-sm-7">
                    <h1>PROCESO DE PROMOCIÓN</h1>
                    <br />
                    <strong>InteracTeach</strong>
                    <br />
                    {{ date }}
                </div>
            </div>
            <hr />

            <!-- Detalles del programador y de la compañía -->
            <div class="row">
                <div class="col-lg-7 col-md-7 col-sm-7">
                    <h3>Programador:</h3>
                    <h5>{{ programmer.userAccount.get_full_name }}</h5>
                    <p>
                        <strong>D.N.I.:</strong> {{ programmer.dni }}
                        <br/>
                        <strong>Contacto:</strong> {{ programmer.userAccount.email }}
                        <br/>
                        <strong>Teléfono:</strong> {{ programmer.phone }}
                    </p>
                </div>
                <div class="col-lg-5 col-md-5 col-sm-5">
                    
                </div>
            </div>
            <hr />

            <!-- Detalles del ejercicio -->
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12">
                    <h3>{{ exercise.title }}</h3>
                    <p>
                        {{ exercise.description }}
                    </p>
                    <p>
                        <strong>Número de ventas:</strong> {{ exercise.sales }}&emsp; | &emsp;<strong>Nivel:</strong> {{ exercise.level }}&emsp;
                        | &emsp;<strong>Asignatura:</strong> {{ exercise.category.name }}&emsp; | &emsp;<strong>Curso:</strong> {{ exercise.category.course }}º
                    </p>
                </div>
            </div>
            <hr />

            <!-- Detalles del precio -->
            <div class="row">
                <!-- Precio -->
                <div class="col-lg-12 col-md-12 col-sm-12">
                    <h4>Precio: {{ prices.promoteExerciseValue }} &euro;</h4>
                </div>
            </div>
            <hr/>

            <!-- PROCESO DE COMPRA -->
                <!-- Botones -->
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12">
                        <!-- Formulario -->
                        <form id="promotionForm" method="post" class="form" role="form">
                            {% csrf_token %}
                            <input type="hidden" id="exerciseId" name="exerciseId" value="{{ exercise.id }}">
                            <input type="hidden" id="promoteExerciseValue" value="{{ prices.promoteExerciseValue }}">
                            <input type="hidden" id="payment" name="payment" value="1">

                            <!-- Bot&#243;n Paypal -->
                            <div id="paypal-button-container"></div>
                            <br/>
                            <a href="{% url 'list_own_exercisesP' %}" class="btn btn-info btn-block">Cancelar</a>
                        </form>
                    </div>
                </div>
                <hr/>

                <!-- Letra pequeña de la promoción -->
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12">
                        <strong>Información: </strong>
                        <ul>
                            <li>Para comprar con PayPal, haz clic en 'Pagar con Paypal'. A continuación, serás redirigido a la página de PayPal para proceder al pago.</li>
                            <li>La duración de la promoción es de 60 días tras el proceso de compra. Después de este periodo, el ejercicio dejará de estar promocionado.</li>
                        </ul>
                    </div>
                </div>
            <hr />
        </div>
    </div>
</div>
{% endblock %}

{% block extrajs %}
    <script src="/static/js/paypalPaymentPromotionExercise.js"></script>
{% endblock %}

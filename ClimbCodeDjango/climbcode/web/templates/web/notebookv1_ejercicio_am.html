{% extends 'base/base.html' %}
{% load staticfiles %}


{% block extrastatic %}
    <style type="text/css" media="screen">
            #editor {
              margin-top: 15px;
              width: auto;
              height: 250px;
            }
        </style>
        <script src="/static/js/jquery.min.js"></script>
        <script src="/static/js/notebook.js"></script>
        
        
        <script src="/static/js/ace-editor/src-min/ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>


        <script>
            $( document ).ready(function() {
                //INIT EDITOR CODIGO
                var idEditor = "idEditor1";
                var editor = ace.edit(idEditor);
                editor.getSession().setMode("ace/mode/javascript");
                editor.getSession().setTabSize(4);
                editor.getSession().setUseWrapMode(true);
                editor.setFontSize(16);
                editor.setShowPrintMargin(false);
                var heightUpdateFunction = function() {                    
                    $('#'+idEditor).height("250px");
                    $('#editor-section').height("250px");
                    // This call is required for the editor to fix all of
                    // its inner structure for adapting to a change in size
                    editor.resize();
                    };
                // Set initial size to match initial content
                heightUpdateFunction();
                // Whenever a change happens inside the ACE editor, update
                // the size again
                editor.getSession().on('change', heightUpdateFunction);

                //INIT CHART

                idChart ="myChart_idBox4";
                var ctx = document.getElementById(idChart);
                var myChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'Nombre Gráfica',
                            data: [],
                            backgroundColor: [
                                'rgba(255, 99, 132, 0.2)',
                                'rgba(54, 162, 235, 0.2)',
                                'rgba(255, 206, 86, 0.2)',
                                'rgba(75, 192, 192, 0.2)',
                                'rgba(153, 102, 255, 0.2)',
                                'rgba(255, 159, 64, 0.2)'
                            ],
                            borderColor: [
                                'rgba(255,99,132,1)',
                                'rgba(54, 162, 235, 1)',
                                'rgba(255, 206, 86, 1)',
                                'rgba(75, 192, 192, 1)',
                                'rgba(153, 102, 255, 1)',
                                'rgba(255, 159, 64, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        chartArea: {
                            backgroundColor: 'rgba(251, 255, 255, 0.4)',
                        },
                        maintainAspectRatio: false,
                        scales: {
                            yAxes: [{
                                ticks: {
                                    beginAtZero:true
                                }
                            }]
                        }
                    }
                });

                });

        </script>

{% endblock %}

{% block title %}
Notebookv1
{% endblock %}
{% block content %}
<div style="width:80%;margin-left: 10%">
    <h1 style="text-align: center">Ejercicio de Análisis Matemático</h1>
    <div class="row" style="background-color: #bbbabb">
        <div class="col-md-12" style="height: auto;">
            <div class="row">
                <!-- CABECERA CON TITULO Y SUBTITULO -->
                <div class="col-md-12 custom-mt-1" >
                    <div style="background-color: #ebebeb;width: auto;height: 200px;padding-top: 15px">
                        <div class="row">
                            <div class="col-md-6 offset-md-3">
                                <div class="form-group">
                                    <label for="username">Título:</label>
                                    <input class="form-control" type="text" name="title" value="ANÁLISIS MATEMÁTICO">
                               </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 offset-md-3">
                                <div class="form-group">
                                    <label for="username">Subtítulo:</label>
                                    <input class="form-control" type="text" name="subtitle" value="Continuidad de una función">
                               </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- CAJA CONTENIDO NOTEBOOK -->
                <div class="col-md-12 custom-mt-1">
                    <div id="notebook_content" style="background-color: #ebebeb;width: auto;height: 4000px">
                        <div class="col-md-12" style="margin-top: 20px;text-align:center">
                            
                            <div class="row">
                                <div class="col-md-12" style="background-color:#bbbabb">
                                    <h2 style="text-align: center">Añadir Cuadro</h2>
                                    <div class="row">
                                        <div class="col-md-2 offset-md-3"  style="margin-top: 20px;margin-bottom: 20px">
                                            <button type="submit" class="btn btn-primary" onclick="addTextBox('notebook_content');">
                                               Texto
                                            </button>
                                        </div>
                                        <div class="col-md-2"  style="margin-top: 20px;margin-bottom: 20px">
                                            <button type="submit" class="btn btn-primary" onclick="addCodeBox('notebook_content');">
                                               Código
                                            </button>
                                        </div>
                                        <div class="col-md-2"  style="margin-top: 20px;margin-bottom: 20px">
                                            <button type="submit" class="btn btn-primary" onclick="addImageBox('notebook_content');">
                                               Ilustración
                                            </button>
                                        </div>        
                                    </div>
                                </div>                                    
                            </div>                                                 
                        </div>
                    <div class="col-md-12 custom-mt-1" id="idBox1"><div class="row"><div class="col-md-12 custom-mt-1"><div class="form-group" style="padding:12px;"><img class="notebook-img" id="idImg1" src="https://3.bp.blogspot.com/-czMO1cgT3KA/WNJIcLQriEI/AAAAAAAA0Nk/9S-ckA4jS9In9nAkyN1H1s7zhUlLAVtAwCPcB/s1600/Continuidad%2Bde%2Buna%2Bfunci%25C3%25B3n%2Bcon%2Bdos%2Bpar%25C3%25A1metros.png" height="171px" width="526px"></div></div><div class="col-md-6 offset-md-3"><input class="form-control" id="idUrlInput1" type="text" placeholder="Establecer URL"></div><div class="col-md-12 offset-md-3"><button class="btn btn-info pull-right" style="margin-top:10px" onclick="updateImg('idImg1','idUrlInput1')" type="button">Actualizar URL</button><button class="btn btn-danger pull-right" style="margin-top:10px" onclick="deleteElement('idBox1')" type="button">Eliminar</button></div></div></div>
                    <div class="col-md-10 custom-mt-1 offset-md-1" id="idBox2"><div class="row"><div class="col-md-12 custom-mt-1"><div class="form-group" style="padding:12px;"><textarea onkeyup="auto_grow(this)" class="form-control text-box-textarea" placeholder="Escribe aquí" style="height: 127px;">

Sea la función dada en la figura, calcula los valores de 'a' y 'b' de manera que f(x) sea continua en todo su dominio.

</textarea><button class="btn btn-danger pull-right" style="margin-top:10px" onclick="deleteElement('idBox2')" type="button">Eliminar</button></div></div></div></div>
                    <div class="col-md-10 custom-mt-1 offset-md-1" id="idBox3"><div class="row"><div class="col-md-12 custom-mt-1"><div class="form-group" style="padding:12px;"><textarea onkeyup="auto_grow(this)" class="form-control text-box-textarea" placeholder="Escribe aquí" style="height: 291px;">

a)	Para que la función sea continua tiene que cumplirse que sea continua en los puntos críticos de la misma, esto es, los valores que intervinen en las condiciones. Los llamaremos pc1 y pc2 Introducir los puntos críticos en param1 y param2 respectivamente.

b)	Para calcular la continuidad en el extremo izquierdo, se calcula el límite de f(pc1) cuando x tiende a x+ y el límite de f(pc1) cuando x tiene a x-. Para que la función sea continua en ese punto, ambas ecuaciones resultantes deben ser iguales.

c)	Para calcular la continuidad en el extremo derecho se realiza el mismo procedimiento, solo que esta vez se calcula el límite de f(pc2) cuando x tiende a x+ y el límite de f(pc2) cuando x tiene a x-. De nuevo se igualarán ambos resultados.

d)	Conocidas las ecuaciones que deben cumplirse para que la función sea continua, solo nos queda calcular a y b mediante sustitución utilizando las dos ecuaciones que acabamos de calcular en b) y c). Introducir los valores en param3 y param 4 respectivamente.</textarea><button class="btn btn-danger pull-right" style="margin-top:10px" onclick="deleteElement('idBox3')" type="button">Eliminar</button></div></div></div></div>

                <div class="col-md-12 custom-mt-1" >
                            <div class="row" id="idBox4">
                                <div class="col-md-10 custom-mt-1 offset-md-1" >
                                    <h2 style="text-align: center">CUADRO DE CÓDIGO</h2>
                                    <div style="background-color: #ebebeb;margin-left: 30px; margin-right: 30px;width: auto;height: auto">
                                        <div class="row" id="idRowPrincipal4">
                                            <div class="col-md-12">
                                                <div id="idEditor1">

var exder = parseInt(document.getElementById("param2").value);
var exizq = parseInt(document.getElementById("param1").value);
var a = parseInt(document.getElementById("param3").value);
var b = parseInt(document.getElementById("param4").value);
var ctx = document.getElementById("myChart_idBox4");

var x_values_der = []
var x_values_izq = []
var x_values = []

for(i = -6; i < exizq; i=i+0.01){
    x_1 = i
    y_1 = (2*i)+1
    x_values_izq.push({
        x: x_1,
        y: y_1
    })
}

for(i = exizq; i <= exder; i=i+0.01){
    x_1 = i
    y_1 = a*(i*i) + b*i
    x_values.push({
        x: x_1,
        y: y_1
    })
}

for(i = exder + 0.01; i < exder + 2; i=i+0.01){
    x_1 = i
    y_1 = i - 4
    x_values_der.push({
        x: x_1,
        y: y_1
    })
}

var data = {
	labels: [-6,-5,-4,-3,-2,-1,01,2,3,4,5,6],
    datasets: [{
        label: "2x + 1",
        borderColor: "#21618c",
        data: x_values_izq,
        fill: false,
        spanGaps: false
    },
    {
        label: "ax^2 + bx",
        borderColor: "#FF0000",
        data: x_values,
        fill: false,
        spanGaps: false
    },
    {
        label: "x - 4",
        borderColor: "#000000",
        data: x_values_der,
        fill: false,
        spanGaps: false
    },
    ]
};

var myChart = new Chart(ctx, {
    type: 'line',
    data: data,
    options: {
        elements: { point: { radius: 0 } },
        scales: {
            xAxes: [{
                type: 'linear',
                position: 'bottom'
            }]
        }
    }
});
"";
                                                </div>
                                                <button class="btn btn-danger pull-right" style="margin-top:10px" onclick="deleteElement('idBox4')" type="button">Eliminar</button>
                                            </div>
                                            
                                            <div class="col-md-12" style="margin-top: 20px;">
                                                    <div class="row" style="padding: 15px;">                                                    
                                                        <div class="col-md-12 div-notebook-parameter" style="margin-top: 20px;background-color: white">
                                                        <h3 style="text-align:center">Parámetros</h3>
                                                            <div class="row" id="id_div_parameter_4">
                                                                <div class="col-md-2" style="margin-top: 20px;"><p>id: param1</p><input name="param1" value="-2" class="form-control" id="param1" type="text"></div>
                                                                <div class="col-md-2"  style="margin-top: 20px;"><p>id: param2</p><input name="param2" value="4" class="form-control" id="param2" type="text"></div>
                                                                <div class="col-md-2" style="margin-top: 20px;"><p>id: param3</p><input name="param3" value="-1/4" class="form-control" id="param3" type="text"></div>
                                                                <div class="col-md-2" style="margin-top: 20px;"><p>id: param4</p><input name="param4" value="1" class="form-control" id="param4" type="text"></div>
                                                                <div id="id_div_parameter_button_4" class="col-md-2" style="margin-top: 20px;"><p>Añadir Parámetro</p><button type="submit" class="btn btn-primary" onclick="addParameter('id_div_parameter_4','id_div_parameter_button_4');"> Añadir </button></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                            </div>
                                            <div id="idColChartButtons1" class="col-md-4" style="margin-top: 20px;">
                                                <button type="submit" class="btn btn-primary" onclick="evalUserCodeAce('idEditor1');">
                                                   Ejecutar >>
                                                </button>
                                                <br><br>
                                                <h4>Resultado del código</h4>
                                                <input name="resultado_idEditor1" class="form-control resultado_code_editor"  id="resultado_idEditor1" type="text" disabled="disabled">
                                                <br><br>
                                            </div>

                                            <div class="col-md-12" id="myChart_idBox4_row" style="height="300">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <b><p style="text-align:center">chart id: myChart_idBox4</p></b>
                                                    </div>                      
                                                    <div class="col-md-12">
                                                        <canvas class="notebook-chart" id="myChart_idBox4" width="auto" height="300"></canvas>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>








                </div>                                        
            </div>
        </div>
    </div>
</div>



{% endblock %}
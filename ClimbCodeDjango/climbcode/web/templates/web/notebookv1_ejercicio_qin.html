{% extends 'base/base.html' %}
{% load staticfiles %}


{% block extrastatic %}
    <style type="text/css" media="screen">
            #editor {
              margin-top: 15px;
              width: auto;
              height: 250px;
            }
        </style>
        <script src="/static/js/jquery.min.js"></script>
        <script src="/static/js/notebook.js"></script>
        
        
        <script src="/static/js/ace-editor/src-min/ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>


        <script>
            $( document ).ready(function() {
                //INIT EDITOR CODIGO
                var idEditor = "idEditor1";
                var editor = ace.edit(idEditor);
                editor.getSession().setMode("ace/mode/javascript");
                editor.getSession().setTabSize(4);
                editor.getSession().setUseWrapMode(true);
                editor.setFontSize(16);
                editor.setShowPrintMargin(false);
                var heightUpdateFunction = function() {                    
                    $('#'+idEditor).height("250px");
                    $('#editor-section').height("250px");
                    // This call is required for the editor to fix all of
                    // its inner structure for adapting to a change in size
                    editor.resize();
                    };
                // Set initial size to match initial content
                heightUpdateFunction();
                // Whenever a change happens inside the ACE editor, update
                // the size again
                editor.getSession().on('change', heightUpdateFunction);

                //INIT CHART

                idChart ="myChart_idBox4";
                var ctx = document.getElementById(idChart);
                var myChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'Nombre Gráfica',
                            data: [],
                            backgroundColor: [
                                'rgba(255, 99, 132, 0.2)',
                                'rgba(54, 162, 235, 0.2)',
                                'rgba(255, 206, 86, 0.2)',
                                'rgba(75, 192, 192, 0.2)',
                                'rgba(153, 102, 255, 0.2)',
                                'rgba(255, 159, 64, 0.2)'
                            ],
                            borderColor: [
                                'rgba(255,99,132,1)',
                                'rgba(54, 162, 235, 1)',
                                'rgba(255, 206, 86, 1)',
                                'rgba(75, 192, 192, 1)',
                                'rgba(153, 102, 255, 1)',
                                'rgba(255, 159, 64, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        chartArea: {
                            backgroundColor: 'rgba(251, 255, 255, 0.4)',
                        },
                        maintainAspectRatio: false,
                        scales: {
                            yAxes: [{
                                ticks: {
                                    beginAtZero:true
                                }
                            }]
                        }
                    }
                });

                });

        </script>

{% endblock %}

{% block title %}
Notebookv1
{% endblock %}
{% block content %}
<div style="width:80%;margin-left: 10%">
    <h1 style="text-align: center">Ejercicio de Química Inorgánica</h1>
    <div class="row" style="background-color: #bbbabb">
        <div class="col-md-12" style="height: auto;">
            <div class="row">
                <!-- CABECERA CON TITULO Y SUBTITULO -->
                <div class="col-md-12 custom-mt-1" >
                    <div style="background-color: #ebebeb;width: auto;height: 200px;padding-top: 15px">
                        <div class="row">
                            <div class="col-md-6 offset-md-3">
                                <div class="form-group">
                                    <label for="username">Título:</label>
                                    <input class="form-control" type="text" name="title" value="QUÍMICA INORGÁNICA">
                               </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 offset-md-3">
                                <div class="form-group">
                                    <label for="username">Subtítulo:</label>
                                    <input class="form-control" type="text" name="subtitle" value="Resolución de compuestos y formulas inorgánicas">
                               </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- CAJA CONTENIDO NOTEBOOK -->
                <div class="col-md-12 custom-mt-1">
                    <div id="notebook_content" style="background-color: #ebebeb;width: auto;height: 4000px">
                        <div class="col-md-12" style="margin-top: 20px;text-align:center">
                            
                            <div class="row">
                                <div class="col-md-12" style="background-color:#bbbabb">
                                    <h2 style="text-align: center">Añadir Cuadro</h2>
                                    <div class="row">
                                        <div class="col-md-2 offset-md-3"  style="margin-top: 20px;margin-bottom: 20px">
                                            <button type="submit" class="btn btn-primary" onclick="addTextBox('notebook_content');">
                                               Texto
                                            </button>
                                        </div>
                                        <div class="col-md-2"  style="margin-top: 20px;margin-bottom: 20px">
                                            <button type="submit" class="btn btn-primary" onclick="addCodeBox('notebook_content');">
                                               Código
                                            </button>
                                        </div>
                                        <div class="col-md-2"  style="margin-top: 20px;margin-bottom: 20px">
                                            <button type="submit" class="btn btn-primary" onclick="addImageBox('notebook_content');">
                                               Ilustración
                                            </button>
                                        </div>        
                                    </div>
                                </div>                                    
                            </div>                                                 
                        </div>
                    <div class="col-md-10 custom-mt-1 offset-md-1" id="idBox2"><div class="row"><div class="col-md-12 custom-mt-1"><div class="form-group" style="padding:12px;"><textarea onkeyup="auto_grow(this)" class="form-control text-box-textarea" placeholder="Escribe aquí" style="height: 127px;">

A continuación, se mostrarán varios compuestos y varias fórmulas químicas, para cada una de ellas se deberá indicar su solución según el tipo que sea.

Ejemplos:

-	ácido sulfhídrico tendría como solución H2S

-	H2S tendría como solución acido sulfhidrico


</textarea><button class="btn btn-danger pull-right" style="margin-top:10px" onclick="deleteElement('idBox2')" type="button">Eliminar</button></div></div></div></div>
                    <div class="col-md-10 custom-mt-1 offset-md-1" id="idBox3"><div class="row"><div class="col-md-12 custom-mt-1"><div class="form-group" style="padding:12px;"><textarea onkeyup="auto_grow(this)" class="form-control text-box-textarea" placeholder="Escribe aquí" style="height: 291px;">

a)	triperóxido de diactinio

b)	ácido manganoso

c)	peróxido cúrico

d)	óxido paladioso

e)	HgOH

f)	H2WO4

g)	HMnO4

h)	HgO

Aparecerá una caja de parámetro para ingresar el resultado.
</textarea><button class="btn btn-danger pull-right" style="margin-top:10px" onclick="deleteElement('idBox3')" type="button">Eliminar</button></div></div></div></div>

                <div class="col-md-12 custom-mt-1" >
                            <div class="row" id="idBox4">
                                <div class="col-md-10 custom-mt-1 offset-md-1" >
                                    <h2 style="text-align: center">CUADRO DE CÓDIGO</h2>
                                    <div style="background-color: #ebebeb;margin-left: 30px; margin-right: 30px;width: auto;height: auto">
                                        <div class="row" id="idRowPrincipal4">
                                            <div class="col-md-12">
                                                <div id="idEditor1">

var resp1 = String(document.getElementById("param1").value);
var resp2 = String(document.getElementById("param2").value);
var resp3 = String(document.getElementById("param3").value);
var resp4 = String(document.getElementById("param4").value);
var resp5 = String(document.getElementById("param5").value);
var resp6 = String(document.getElementById("param6").value);
var resp7 = String(document.getElementById("param7").value);
var resp8 = String(document.getElementById("param8").value);
var ctx = document.getElementById("myChart_idBox4");

resps = [resp1,resp2,resp3,resp4,resp5,resp6,resp7,resp8]
resps_co = 0
resps_inco = 0

if (String(resp1) === "Ac2(O2)3"){
    resps_co += 1
} else {
    resps_inco += 1
}

if (resp2 === "H2MnO3"){
    resps_co += 1
} else {
    resps_inco += 1
}

if (resp3 == "Cm2(O2)3"){
    resps_co += 1
} else {
    resps_inco += 1
}

if (resp4 == "PdO"){
    resps_co += 1
} else {
    resps_inco += 1
}

if (resp5 == "hidroxido de mercurio" || resp5 == "hidróxido de mercurio"){
    resps_co += 1
} else {
    resps_inco += 1
}

if (resp6 == "ácido tetraoxowolfrámico" || resp6 == "acido tetraoxowolframico"){
    resps_co += 1
} else {
    resps_inco += 1
}

if (resp7 == "ácido tetraoxomangánico" || resp7 == "acido tetraoxomanganico"){
    resps_co += 1
} else {
    resps_inco += 1
}

if (resp8 == "óxido de mercurio" || resp8 == "oxido de mercurio"){
    resps_co += 1
} else {
    resps_inco += 1
}

var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['Respuestas correctas', 'Respuestas incorrectas'],
        datasets: [{
            data: [resps_co,resps_inco],
            borderColor: ["#239b56", "#FF0000"],
            backgroundColor: ["#239b56", "#FF0000"],
            borderWidth: 1
        }]
    },
    options: {
        legend: { display: false },
        title: {
            display: true,
            text: ' '
        },
        maintainAspectRatio: false,
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:true
                }
            }]
        }
    }
});
"";
                                                </div>
                                                <button class="btn btn-danger pull-right" style="margin-top:10px" onclick="deleteElement('idBox4')" type="button">Eliminar</button>
                                            </div>
                                            
                                            <div class="col-md-12" style="margin-top: 20px;">
                                                    <div class="row" style="padding: 15px;">                                                    
                                                        <div class="col-md-12 div-notebook-parameter" style="margin-top: 20px;background-color: white">
                                                        <h3 style="text-align:center">Parámetros</h3>
                                                            <div class="row" id="id_div_parameter_4">
                                                                <div class="col-md-2" style="margin-top: 20px;"><p>id: param1</p><input name="param1" value="Ac2(O2)3" class="form-control" id="param1" type="text"></div>
                                                                <div class="col-md-2" style="margin-top: 20px;"><p>id: param2</p><input name="param2" value="H2MnO3" class="form-control" id="param2" type="text"></div>
                                                                <div class="col-md-2" style="margin-top: 20px;"><p>id: param3</p><input name="param3" value="Cm2(O2)3" class="form-control" id="param3" type="text"></div>
                                                                <div class="col-md-2" style="margin-top: 20px;"><p>id: param4</p><input name="param4" value="PdO" class="form-control" id="param4" type="text"></div>
                                                                <div class="col-md-2" style="margin-top: 20px;"><p>id: param5</p><input name="param5" value="hidroxido de mercurio" class="form-control" id="param5" type="text"></div>
                                                                <div class="col-md-2" style="margin-top: 20px;"><p>id: param6</p><input name="param6" value="ácido tetraoxowolfrámico" class="form-control" id="param6" type="text"></div>
                                                                <div class="col-md-2" style="margin-top: 20px;"><p>id: param7</p><input name="param7" value="ácido tetraoxomangánico" class="form-control" id="param7" type="text"></div>
                                                                <div class="col-md-2" style="margin-top: 20px;"><p>id: param8</p><input name="param8" value="óxido de mercurio" class="form-control" id="param8" type="text"></div>
                                                                <div id="id_div_parameter_button_4" class="col-md-2" style="margin-top: 20px;"><p>Añadir Parámetro</p><button type="submit" class="btn btn-primary" onclick="addParameter('id_div_parameter_4','id_div_parameter_button_4');"> Añadir </button></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                            </div>
                                            <div id="idColChartButtons1" class="col-md-4" style="margin-top: 20px;">
                                                <button type="submit" class="btn btn-primary" onclick="evalUserCodeAce('idEditor1');">
                                                   Ejecutar >>
                                                </button>
                                                <br><br>
                                                <h4>Resultado del código</h4>
                                                <input name="resultado_idEditor1" class="form-control resultado_code_editor"  id="resultado_idEditor1" type="text" disabled="disabled">
                                                <br><br>
                                            </div>

                                            <div class="col-md-12" id="myChart_idBox4_row" style="height="300">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <b><p style="text-align:center">chart id: myChart_idBox4</p></b>
                                                    </div>                      
                                                    <div class="col-md-12">
                                                        <canvas class="notebook-chart" id="myChart_idBox4" width="auto" height="300"></canvas>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>








                </div>                                        
            </div>
        </div>
    </div>
</div>



{% endblock %}